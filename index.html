<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>Matrix Chat</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/alpinejs" defer></script>
</head>
<body class="bg-gray-100 flex items-center justify-center h-screen">

<div x-data="chatApp()" class="bg-white p-6 rounded shadow-md w-[700px] h-[600px]">
  
  <!-- –§–æ—Ä–º–∞ –ª–æ–≥—ñ–Ω—É -->
  <template x-if="!accessToken">
    <div>
      <h2 class="text-2xl font-extrabold mb-6 text-blue-700 text-center">üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è</h2>
      <input x-model="username" placeholder="Username"
             class="border p-2 w-full mb-3 rounded focus:ring-2 focus:ring-blue-400" />
      <input x-model="password" type="password" placeholder="Password"
             class="border p-2 w-full mb-3 rounded focus:ring-2 focus:ring-blue-400" />
      <button @click="login()" 
              class="bg-blue-500 hover:bg-blue-600 text-white font-semibold p-2 w-full rounded shadow transition">
        –£–≤—ñ–π—Ç–∏
      </button>
      <p x-text="error" class="text-red-500 mt-3 text-center font-medium"></p>
    </div>
  </template>

  <!-- –ü–∞–Ω–µ–ª—å –ø—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –≤—Ö–æ–¥—É -->
  <template x-if="accessToken">
    <div class="flex flex-col h-full bg-gradient-to-r from-blue-50 to-blue-100 p-6 rounded-lg shadow-lg">
      <h1 class="text-2xl font-extrabold mb-6 text-blue-700 text-center">
        üéâ –í–∏ —É—Å–ø—ñ—à–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑—É–≤–∞–ª–∏—Å—å!
      </h1>
      
      <!-- User ID -->
      <div class="mb-4 p-3 bg-white border border-gray-300 rounded-lg text-sm break-words shadow">
        <span class="font-bold text-gray-700">–í–∞—à Matrix ID:</span>
        <span class="ml-2 text-blue-600 font-mono" x-text="userId ? userId : '–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...'"></span>
      </div>

      <!-- Resume --> 
      <div class="mt-4 p-5 bg-white rounded-lg shadow border border-gray-200">
        <h2 class="text-lg font-bold mb-3 text-gray-800">üìÑ –ú–æ—î —Ä–µ–∑—é–º–µ</h2>
        <ul class="space-y-1 text-gray-700">
          <li><span class="font-semibold">–Ü–º‚Äô—è:</span> –ö–∞—Ç–µ—Ä–∏–Ω–∞ </li>
          <li><span class="font-semibold">–û—Å–≤—ñ—Ç–∞:</span> –ö—É—Ä—Å–∞–Ω—Ç –ö–ü–Ü, —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ—Å—Ç—å 122 ‚Äì –ö–æ–º–ø‚Äô—é—Ç–µ—Ä–Ω—ñ –Ω–∞—É–∫–∏</li>
          <li><span class="font-semibold">–Ü–Ω—Ç–µ—Ä–µ—Å–∏:</span> –ø–æ–¥–æ—Ä–æ–∂—ñ –º—É–∑–∏–∫–∞</li>
          <li><span class="font-semibold">–ü—Ä–æ—î–∫—Ç–∏:</span> —Å–∞–π—Ç-–ø–æ—Ä—Ç—Ñ–æ–ª—ñ–æ, PWA —Ç–∞ Java-–¥–æ–¥–∞—Ç–∫–∏</li>
        </ul>
      </div>

      <!-- Logout button -->
      <button @click="accessToken='', userId=''" 
              class="mt-6 bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-lg shadow transition">
        üö™ –í–∏–π—Ç–∏
      </button>
    </div>
  </template>

</div>

<script>
function chatApp() {
  return {
    username: '',
    password: '',
    accessToken: '',
    error: '',
    userId: '',
    async login() {
      try {
        const res = await fetch('https://matrix.org/_matrix/client/r0/login', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ 
            type: 'm.login.password', 
            user: this.username, 
            password: this.password 
          })
        });
        const data = await res.json();
        if (data.access_token) {
          this.accessToken = data.access_token;
          this.userId = data.user_id;
          this.error = '';
        } else {
          this.error = '–ù–µ–≤—ñ—Ä–Ω–∏–π –ª–æ–≥—ñ–Ω –∞–±–æ –ø–∞—Ä–æ–ª—å';
        }
      } catch(e) {
        this.error = '–ü–æ–º–∏–ª–∫–∞ –ø—ñ–¥ —á–∞—Å –≤—Ö–æ–¥—É';
        console.error(e);
      }
    }
  }
}
</script>

</body>
</html>


